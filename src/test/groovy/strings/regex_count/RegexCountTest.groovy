package strings.regex_count

import spock.lang.Specification
import spock.lang.Unroll

class RegexCountTest extends Specification {

    @Unroll
    def "test #regex #len"() {
        expect:
        Solution.count(regex, len) == expectedResult

        where:
        regex           | len | expectedResult
        "((ab)|(ba))"   | 2   | 2
        "(a*)"          | 2   | 1
        "((a*)*)"       | 2   | 1
        "((a*)|(b*))"   | 2   | 2
        "((a|b)*)"      | 5   | 32
        "((a*)(b(a*)))" | 100 | 100
    }

    @Unroll
    def "test 3 #regex"() {
        expect:
        Solution.count(regex, len) == expectedResult

        where:
        regex                                                                                           | len       | expectedResult
        "(((a(bb))*)((((((ba)b)(b*))|(((((((ba)*)*)*)(((((aa)b)|(aa))*)*))(b(a*)))*))*)*))"             | 915989945 | 194519002
        "((((((b|(aa))a)|a)(b(b|a)))|(((b|a)a)(((((((a|a)a)*)(b|a))*)*)*)))*)"                          | 201345765 | 433197926
        "(((((b(((((b*)*)*)*)*))|(((((((((a*)(b*))*)|b)(a((a*)|a)))|(a(bb)))b)*)*))*)*)*)"              | 93232174  | 578675269
        "(((((((a|(((b*)*)|a))*)*)|((((b|a)|(((((a|a)|b)*)(((aa)*)(aa)))*))*)*))*)a)|((a|b)|(b(b|b))))" | 281957437 | 698694936
        "((((((b|(((b|a)|a)b))(a*))|a)b)*)((((a|a)((((ab)*)b)((a|(bb))|(aa))))|(a*))*))"                | 694860592 | 421324494
        "(((b|((b|(b|a))*))((((b*)((((b|b)b)*)b))|(b|((b*)|(((aa)|a)(ab)))))*))*)"                      | 265989391 | 833298888
        "((b|(((a|(b|(b|a)))(aa))|((a*)|(((b*)|b)(((b|((b|b)a))((b(a*))*))*)))))|((((ab)a)|(a*))*))"    | 727856738 | 40472597
        "((b|b)|(((((b*)b)((ab)|a))((aa)*))(((a|((bb)*))a)(b|((b*)b)))))"                               | 541787378 | 222297295
        "(((((((((bb)|b)(ab))a)*)*)((a|((bb)b))*))|(b(((a*)*)((b|(b|b))*))))|a)"                        | 894617268 | 488397718
        "(((((((((ba)|b)|(a|b))|(aa))(b(a*)))|((((b|(b|b))*)*)*))((a|(b((a|b)(a|(b*)))))((b*)b)))*)*)"  | 67966708  | 701637957
        "(((((((bb)a)*)(a*))*)|b)|(((ba)*)|(((((a*)a)a)(((ab)*)|(b((b|a)|b))))*)))"                     | 562479000 | 675191009
        "((((((a*)|(a*))|b)*)*)((((a|(a|(ab)))|(ba))((ba)b))|(((a(ab))|a)*)))"                          | 394062427 | 322106445
        "(((aa)a)|(((b|(aa))(((((((((b(b|a))*)a)*)|((a(ab))(((a|a)*)*)))*)(((a|b)*)*))*)*))*))"         | 142010737 | 879822947
        "((((a(a(bb)))*)|((a*)*))|(((((((b*)*)|a)b)*)((aa)*))(((a|a)|(b((b*)|b)))*)))"                  | 50760513  | 185058387
        "((((((a*)*)|((((a(b*))|b)*)(ab)))(((((b|a)|(ab))|b)(a*))*))*)*)"                               | 15322501  | 96631870
        "((((((a|(a|a))|(((ab)*)|(((b|(a*))*)|(((a|b)*)*))))*)|((ba)(a|(a*))))*)*)"                     | 130082425 | 679295917
        "(((((b*)|(a*))(((a(((b|(b|b))(((a|b)|a)a))*))((b|b)a))*))*)|a)"                                | 905039196 | 483197458
        "((((((a|((ab)b))(b|b))|((b|((b|a)*))|(a*)))*)|(((b*)|a)(b|((b|(a|a))a))))*)"                   | 847472102 | 929842372
        "(((((b(b|a))*)*)((((((ba)|(((bb)|(b|b))a))*)*)*)(((a*)|a)*)))|b)"                              | 545042418 | 635880885
        "((((((a(b(a*)))(a(b*)))*)*)(((((ba)b)(((a*)|(((b|b)*)((a*)*)))*))*)(ab)))*)"                   | 340573925 | 984507678
        "(((a((b|(bb))((b*)|(ab))))|((((((a|a)((b|b)|((b|b)*)))*)a)(a|b))|(((((ab)*)b)*)*)))*)"         | 79943990  | 311257451
        "(((((b|(((a((b|(bb))(((a|a)(b*))*)))*)*))((((a|a)|b)|(b*))*))*)|b)|((((a*)*)*)|(((ab)|a)*)))"  | 621421515 | 163171583
        "((((((bb)|a)*)((((a*)|a)*)*))*)(((((((b*)(b|b))((b|(a|a))((a*)(a*))))*)|(a|(a|a)))|b)a))"      | 731571084 | 908519673
        "((a(((a|(a|a))((((b|b)|((b|b)|(((b*)|((aa)|a))*)))((((((a|a)*)a)a)*)((ba)a)))*))*))*)"         | 884412401 | 501781925
        "(((((((((((aa)|(ab))*)(b|((a*)*)))*)((a|(b|b))*))|(b*))|((b*)(ba)))|(aa))|(bb))*)"             | 332682670 | 328133762
        "(((((b*)(b(b|b)))*)|((((b(bb))|b)*)|(a*)))((a|a)|(((a|((b*)*))(((b|(b|b))*)*))*)))"            | 615080263 | 540351280
        "((a|(((((ab)|(b((aa)a)))*)(((a|b)*)|(ba)))((a(((ab)*)a))(b(a*)))))|((a(bb))a))"                | 502676150 | 557734885
        "(((((a|b)((a*)((a|a)(a|b))))a)|((bb)|(((aa)b)|(((b*)|b)a))))(a|a))"                            | 973472613 | 5
        "(((((((((a|a)(a*))((b*)b))*)|(a*))(b*))*)(a(((a|a)*)|(a|b))))|((((((aa)|(a(ba)))*)a)|b)*))"    | 610548851 | 913664426
        "((((((a|(b*))*)*)|((bb)a))|a)(((a|(b|b))*)|(((ab)a)|((b(a|(a(b|b))))*))))"                     | 350162946 | 578583313
        "((((ba)(((a(b|b))|((a|a)|(ba)))|((((aa)|b)|b)*)))|(b*))(((ab)|a)((b((b*)|b))a)))"              | 951817538 | 204572017
        "((((((a|((b|b)((b*)a)))((bb)*))*)*)((((b((aa)*))(((a|(b|(a*)))*)*))*)*))*)"                    | 294833429 | 29795240
        "(((((aa)|((b*)a))*)|(((a|(b|b))*)((((a|b)|((a|(b((b*)a)))*))*)*)))|(((ba)|b)*))"               | 581339350 | 543336284
        "((((((((b|a)|a)|(((b*)*)|b))|(b*))|((b|(ba))(((b|a)*)*)))|((ab)*))*)*)"                        | 200593590 | 113372448
        "((((((a(((b*)*)((a|(b*))|a)))*)((a(a*))a))|((a*)|(((b|a)b)|a)))|((((b*)(ab))((a|b)*))a))*)"    | 271265406 | 873343620
        "(((((((((bb)*)*)((((((b*)|((b*)|a))*)*)*)|a))*)*)((a|b)a))*)|(((b(b*))*)a))"                   | 35757023  | 335782236
        "((((a|(a*))*)((((b|b)|(((ba)*)b))*)(((ab)((((b(ba))(((b*)*)|b))|a)b))*)))*)"                   | 799233684 | 696105515
        "((((((a|b)*)*)(((((a|(b|a))*)|b)|b)|a))((b|((((b((b*)*))|(a|a))|b)(a(b|b))))((a*)a)))*)"       | 303414866 | 559571245
        "((((b|(((b((b*)*))*)((ba)|((a|a)a))))((b*)(a|b)))*)|((ab)b))"                                  | 710458318 | 114373520
        "(((b*)((((((a|b)*)|b)*)|((b|(a*))|(b|a)))*))|(((((b*)*)|a)*)*))"                               | 339740288 | 140947419
        "(((b|a)|(((b|b)*)a))|(((((((a*)*)|((a*)|a))(((((((b*)*)*)*)|(a*))*)|((a*)|a)))*)|a)(aa)))"     | 875295032 | 429077550
        "(((((b(b|a))*)|(b((b*)*)))*)|(((ba)((b|(b|b))*))|((a|a)|((a*)*))))"                            | 928027711 | 350623194
        "(((b(a(((b*)|a)*)))|((((((b|b)|b)*)|(a*))|(b|(b|((a|(ba))((a|a)|(ba))))))*))(ba))"             | 75563678  | 434489515
        "((((((b*)|b)*)(bb))*)(((a*)a)((a*)(((b*)*)(a|(((ab)|(b*))*))))))"                              | 505538317 | 903144740
        "(((b(((b(b|b))*)|b))*)|(b(((((aa)*)(((((a((a|b)*))*)*)*)*))b)*)))"                             | 136543152 | 211956350
        "((((bb)|(a((((aa)*)|a)*)))((b*)*))(((((ab)|((ab)*))*)*)((ba)|b)))"                             | 352615254 | 65253326
        "((((((((b*)|(a|a))((ab)a))|b)*)*)|(((bb)|b)*))(((a|a)(b|a))((aa)(b*))))"                       | 790411261 | 28917682
        "(((((b((a|b)*))|(((aa)|b)|((b(a*))*)))*)((((((a*)*)|(b|((bb)*)))|((((aa)(ab))a)*))|b)*))a)"    | 195958574 | 696473903
        "(((b((b|b)(a(a|(a*)))))(((a*)*)|b))(((((b*)b)|a)*)((((((((a|(aa))|b)(b|b))|a)*)*)*)*)))"       | 645202513 | 442015137
        "(((a(a(bb)))|(b((a*)*)))(((bb)|(a*))|(((((((b*)|(a*))|((b|b)*))*)((aa)*))*)*)))"               | 935871403 | 611952427
    }
}
